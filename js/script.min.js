$(function(){var j="X",f="O",e=j;vencedor=false,tabuleiro=$(".tabuleiro table"),casas=tabuleiro.find("td");var a=$.unserialize(window.location.search);
if(typeof a.computerStart!="undefined"&&a.computerStart==1){e=f;}casas.each(function(o){$(this).attr("rel",o+1);});var h=new Array(),k=new Array();var b=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]];
casas.find("a").click(function(){if(e==f){alert("É a vez do Jogador 2 de jogar");}else{h.push(parseInt($(this).parent().attr("rel")));$(this).parent().text(e).end().remove();
g(e);e=f;if(casas.find("a").length>0){d();}}});var g=function(o){todasCombinacoes:for(i in b){combinacao=b[i];if(l(combinacao,o)){vencedor=o;casas.find("a").remove();
alert("O jogador "+vencedor+" é o vencedor");break todasCombinacoes;}}},l=function(o,p){estaVencendo=true;for(i in o){if(casas.eq((o[i]-1)).text()!=p){estaVencendo=false;
break;}}return estaVencendo;},d=function(){if(e==f){if(h.length>0){var r=c(h,k),t=0,y=0;possibilidades:for(i in r){var u=r[i];t=0;for(n in u){var x=u[n];
if($.inArray(x,h)!=-1){t++;}else{y=x;}}if(t==2){break possibilidades;}}var p=c(k,h),A=0,B=0;p:for(i in p){var u=p[i];A=0;for(n in u){var x=u[n];if($.inArray(x,k)!=-1){A++;
}else{B=x;}}if(A==2){break p;}}if(A==2){casas.eq(B-1).text(e).find("a").remove();k.push(B);}else{if(t==2){casas.eq(y-1).text(e).find("a").remove();k.push(y);
}else{var o=casas.eq(4);if(o.text()!=j&&o.text()!=f){o.text(e).find("a").remove();k.push(5);}else{var s;if(k.length!=1||$.inArray(5,h)!=-1){s=new Array(1,3,7,9);
}else{s=new Array(2,4,6,8);}var w=randomNum(s.length),q=s[w],v=casas.find("a");while((casas.eq(q-1).text()==j||casas.eq(q-1).text()==f)&&v.length>1){s.splice(w,1);
w=randomNum(s.length);q=s[w];}if(v.length==1){q=parseInt(v.first().parent().attr("rel"));}casas.eq(q-1).text(e).find("a").remove();k.push(q);}}}}else{var z=new Array(1,3,7,9),q=z[randomNum(z.length)];
casas.eq(q-1).text(e).find("a").remove();k.push(q);}g(e);e=j;}},c=function(s,r){if(s.length==0){new Array();}var o=new Array();for(i in b){var p=b[i];var q=s[s.length-1];
if($.inArray(parseInt(q),p)!=-1){if(!m(p,r)){o.push(p);}}}return o;},m=function(q,r){if(r.length==0){return false;}var p=false;for(i in r){var o=r[i];if($.inArray(parseInt(o),q)!=-1){p=true;
break;}}return p;};if(e==f){d();}});randomNum=function(a){return(Math.floor(Math.random()*a));};